# Полная настройка бандла

В этом документе указаны все настройки бандла. 
```yaml
# app/config/config.yml
lexxpavlov_spelling:
    entity_class:         AppBundle\Entity\Spelling
    user_field:           username    # field of user entity, that identified this user
    find_by:              slug
    data_delimiter:       '#@'
    error_trans_domain:   LexxpavlovSpellingBundle
    security:
        entity_class:     AppBundle\Entity\SpellingSecurity
        allowed_role:     null
        query_interval:   5           # in seconds, default 5
        ban_period:       86400       # in seconds, default one day (86400 seconds)
        ban_check_period: 86400       # in seconds, default one day (86400 seconds)
        ban_count:        10
```

Все параметры являются необязательными, поэтому, если вас устраивают значения 
по умолчанию, то в `config.yml` указывать раздел бандла не обязательно. 

Если указать `~`, то все параметры будут по умолчанию:  
```yaml
# app/config/config.yml
lexxpavlov_spelling: ~
```

## Описание параметров

### entity_class
Значение по умолчанию: AppBundle\Entity\Spelling

Класс сущности, хранящейся информацию об ошибке. 

### user_field
Значение по умолчанию: username

Поле сущности пользователя, которое определяет пользователя. Используется в 
таблицах редакторов (создателей ошибки) и корректоров (исправивших ошибку).

> Примеры: `name`, `fullname`, `email`.

### find_by
Значение по умолчанию: slug

Поле ресурса (статья, новость, пр.), используемого для поиска идентификатора
ресурса при определении роута для исправления ошибки. 

Подробнее смотрите [Использование SonataAdminBundle](sonata-admin.md).

### data_delimiter
Значение по умолчанию: #@

Разделитель url ресурса и служебной информации. Эта информация используется для
определения сущности, хранящей текст, например, в тех случаях, когда на одной 
странице используется несколько сущностей.

Если указано значение, отличное от значения по умолчанию, то это же значение
требуется указать в фронтенд-части (spelling.ja).

Подробнее смотрите [Технология работы](technology.md).

### error_trans_domain
Значение по умолчанию: LexxpavlovSpellingBundle

Домен перевода ошибок в бэкенде.

## Настройки безопасности

### entity_class
Значение по умолчанию: AppBundle\Entity\SpellingSecurity

Класс сущности, хранящейся информацию об IP-адресе пользователя. Используется для 
ограничения количества запросов от одного пользователя (Flood control).

### allowed_role
Значение по умолчанию: null

Роль пользователей, которые могут создавать ошибки. По умолчанию создавать 
ошибки могут все, в том числе и анонимные пользователи. Для того, чтобы 
разрешить только авторизованным пользователям, можно указать роль 
`IS_AUTHENTICATED_REMEMBERED` или `IS_AUTHENTICATED_FULLY`.

Подробнее смотрите [Ограничение пользователей](auth-check.md).

### query_interval
Значение по умолчанию: 5

Минимальный интервал запросов об ошибке (в секундах). Используется для ограничения 
количества запросов от одного пользователя (Flood control). Если пользователь 
отправляет запрос на создание ошибки раньше, чем прошло `query_interval` секунд с
прошлого запроса, то ему назначается одно нарушение.

Значение 0 отключает проверку IP-адреса.

Подробнее смотрите [Ограничение IP-адресов](flood-control.md).

### ban_period
Значение по умолчанию: 86400 (одни сутки)

Период (в секундах), на который IP-адрес блокируется (бан). 

### ban_check_period
Значение по умолчанию: 86400 (одни сутки)

Интервал (в секундах), в котором считается количество нарушений для блокировки
IP-адреса. Через указанное время количество нарушений обнуляется.

### ban_count
Значение по умолчанию: 10

Количество нарушений для блокировки IP-адреса.
