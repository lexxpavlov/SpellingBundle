# Ограничение IP-адресов

Злоумышленник может начать создавать сотни запросов об ошибках в секунду, 
что может вывести сервер из строя (DoS - Denial of Service - атака "отказ
в обслуживании"). Чтобы предотвратить это, требуется хранить IP-адрес 
пользователя и проверять, когда пользователь обращался с запросом последний
раз. Если интервал между текущим и предыдущим запросами меньше определённого,
то пользователю назначается нарушение, и текущий запрос сбрасывается (ошибка не
записывается в базу данных). Если у пользователя уже несколько нарушений, то
он блокируется (бан).

Возможность ограничения пользователей работает как обработка события 
`lexxpavlov_spelling.new_error`. Подробнее см. в разделе [Дополнительная 
проверка ошибки](custom-event-listener.md)

## Параметры бандла

Параметр         | Значение по умолчанию     | Описание
-----------------|---------------------------|---------------------------
query_interval   | 5 секунд                  | Минимальный интервал запросов об ошибке
ban_count        | 10                        | Количество нарушений для блокировки IP-адреса
ban_period       | 86400 секунд (одни сутки) | Период, на который IP-адрес блокируется
ban_check_period | 86400 секунд (одни сутки) | Интервал, в котором считается количество нарушений для блокировки IP-адреса. Через указанное время количество нарушений обнуляется.

> Замечание. Если `query_interval` равен 0, то проверка IP-адреса отключается.
